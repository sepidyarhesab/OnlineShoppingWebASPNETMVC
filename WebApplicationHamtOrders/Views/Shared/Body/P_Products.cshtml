@using OrdersInventory.Repository.Inventory

<!-- .block-products-carousel -->

@{
    var rep = new RepProducts();
    var config = rep.RepositoryMainConfigurationForShow();
    if (config.Count > 0)
    {
        foreach (var head in config)
        {
            if (head.PrimaryTitle.Contains("ویژه"))
            {
                <section class="product-carousel amazing-section mb-5" style="background: rgb(239, 57, 78);">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-xl-2 col-lg-3 amazing-img-column">
                                <div class=" d-flex flex-direction-column justify-content-center">
                                    <img src="/Helper/Layouts/assets/img/amazing-1.png" width="140" alt="amazing">
                                </div>
                            </div>
                            <div class="col-xl-10 col-lg-9">
                                <div class="swiper-container slider-amazing">
                                    <div class="swiper-wrapper">
                                        @{
                                            if (head.CategoriesRef != null)
                                            {
                                                var resultCategoreis = rep.RepositoryMainSelectionCategoreisProducts(head.CategoriesRef);

                                                if (resultCategoreis.Count > 0)
                                                {
                                                    foreach (var item in resultCategoreis)
                                                    {
                                                        <div class="swiper-slide">
                                                            <div class="product-card default-ui">
                                                                <div class="product-card-top">
                                                                    <a href="@Url.RouteUrl("Product", new {id = item.Id.ToString()})" class="product-image">
                                                                        <img src="@item.FileName" alt="@item.PrimaryTitle">
                                                                    </a>
                                                                    <div class="product-card-actions">
                                                                        <div class="btn btn-danger">
                                                                            @item.Discount%
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                @{
                                                                    var ProductFee = (item.Fee - ((item.Fee * item.Discount) / 100));
                                                                    if (item.Discount > 0)
                                                                    {
                                                                        <div class="product-card-middle">
                                                                            <h6 class="product-name">
                                                                                <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })">
                                                                                    @item.PrimaryTitle
                                                                                </a>
                                                                            </h6>
                                                                            <div class="product-price product-price-clone">
                                                                                <del>
                                                                                    @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                                </del>
                                                                                @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                            </div>
                                                                        </div>
                                                                        <div class="product-card-bottom">
                                                                            <div>
                                                                                موجودی  :  <span class="@item.QuantityClass">  @item.QuantityTitle</span>
                                                                            </div>
                                                                            <div class="product-price">
                                                                                <del>
                                                                                    @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                                </del>
                                                                                @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                            </div>
                                                                            <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })" class="btn-add-to-cart">
                                                                                <i class='bx bx-cart-alt' ></i>
                                                                                مشاهده کالا
                                                                            </a>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="product-card-middle">
                                                                            <div class="ratings-container">
                                                                                <div class="ratings">
                                                                                    <div class="ratings-val" style="width: 65%;"></div>
                                                                                </div>
                                                                            </div>
                                                                            <h6 class="product-name">
                                                                                <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })">
                                                                                    @item.PrimaryTitle
                                                                                </a>
                                                                            </h6>
                                                                            <div class="product-price product-price-clone">
                                                                                @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                            </div>
                                                                        </div>
                                                                        <div class="product-card-bottom">
                                                                            <div>
                                                                                موجودی  :  <span class="@item.QuantityClass">  @item.QuantityTitle</span>
                                                                            </div>
                                                                            <div class="product-price">
                                                                                @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                            </div>
                                                                            <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })" class="btn-add-to-cart">
                                                                               <i class='bx bx-cart-alt' ></i>
                                                                                مشاهده کالا
                                                                            </a>
                                                                        </div>
                                                                    }

                                                                }

                                                            </div>
                                                        </div>
                                                    }
                                                }
                                            }
                                            else
                                            {
                                                var resultSelection = rep.RepositorySelectionProduct(head.Id);
                                                if (resultSelection.Count > 0)
                                                {
                                                    foreach (var item in resultSelection)
                                                    {


                                                        <div class="swiper-slide">
                                                            <div class="product-card default-ui">
                                                                <div class="product-card-top">
                                                                    <a href="@Url.RouteUrl("Product", new {id = item.Id.ToString()})" class="product-image">
                                                                        <img src="@item.FileName" alt="@item.PrimaryTitle">
                                                                    </a>
                                                                    <div class="product-card-actions">
                                                                        <div class="btn btn-danger">
                                                                            @item.Discount%
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                @{
                                                                    var ProductFee = (item.Fee - ((item.Fee * item.Discount) / 100));
                                                                    if (item.Discount > 0)
                                                                    {
                                                                        <div class="product-card-middle">
                                                                            <h6 class="product-name">
                                                                                <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })">
                                                                                    @item.PrimaryTitle
                                                                                </a>
                                                                            </h6>
                                                                            <div class="product-price product-price-clone">
                                                                                <del>
                                                                                    @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                                </del>
                                                                                @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                            </div>
                                                                        </div>
                                                                        <div class="product-card-bottom">
                                                                            <div>
                                                                                موجودی  :  <span class="@item.QuantityClass">  @item.QuantityTitle</span>
                                                                            </div>
                                                                            <div class="product-price">
                                                                                <del>
                                                                                    @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                                </del>
                                                                                @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                            </div>
                                                                            <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })" class="btn-add-to-cart">
                                                                               <i class='bx bx-cart-alt' ></i>
                                                                                مشاهده کالا
                                                                            </a>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="product-card-middle">
                                                                            <div class="ratings-container">
                                                                                <div class="ratings">
                                                                                    <div class="ratings-val" style="width: 65%;"></div>
                                                                                </div>
                                                                            </div>
                                                                            <h6 class="product-name">
                                                                                <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })">
                                                                                    @item.PrimaryTitle
                                                                                </a>
                                                                            </h6>
                                                                            <div class="product-price product-price-clone">
                                                                                @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                            </div>
                                                                        </div>
                                                                        <div class="product-card-bottom">
                                                                            <div>
                                                                                موجودی  :  <span class="@item.QuantityClass">  @item.QuantityTitle</span>
                                                                            </div>
                                                                            <div class="product-price">
                                                                                @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                            </div>
                                                                            <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })" class="btn-add-to-cart">
                                                                               <i class='bx bx-cart-alt' ></i>
                                                                                مشاهده کالا
                                                                            </a>
                                                                        </div>
                                                                    }

                                                                }

                                                            </div>
                                                        </div>




                                                    }
                                                }
                                            }
                                        }

                                    </div>
                                    <!-- Add Arrows -->
                                    <div class="swiper-button-next"></div>
                                    <div class="swiper-button-prev"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            }
            else
            {
                <section class="product-carousel in-box">
                    <div class="section-title">
                        <i class="fad fa-pen-nib"></i>
                        @head.PrimaryTitle
                    </div>
                    <div class="swiper-container slider-lg">
                        <div class="swiper-wrapper">
                            @{
                                if (head.CategoriesRef != null)
                                {
                                    var resultCategoreis = rep.RepositoryMainSelectionCategoreisProducts(head.CategoriesRef);

                                    if (resultCategoreis.Count > 0)
                                    {
                                        foreach (var item in resultCategoreis)
                                        {
                                            <div class="swiper-slide">
                                                <div class="product-card default-ui">
                                                    <div class="product-card-top">
                                                        <a href="@Url.RouteUrl("Product", new {id = item.Id.ToString()})" class="product-image">
                                                            <img src="@item.FileName" alt="@item.PrimaryTitle">
                                                        </a>
                                                    </div>
                                                    <div class="product-card-middle">
                                                        <h6 class="product-name">
                                                            <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })">
                                                                @item.PrimaryTitle
                                                            </a>
                                                        </h6>
                                                        <h6 class="product-name">
                                                            موجودی: <span class="@item.QuantityClass">@item.QuantityTitle</span>
                                                        </h6>
                                                        @*@{
                                                                var ProductFee1 = (item.Fee - ((item.Fee * item.Discount) / 100));
                                                                if (item.Discount > 0)
                                                                {
                                                                    <div class="product-price product-price-clone">
                                                                        <del>@string.Format("{0:##,###}", ProductFee1, "Fee") تومان</del>
                                                                        @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                    </div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="product-price product-price-clone">
                                                                        @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                    </div>
                                                                }
                                                            }*@
                                                    </div>

                                                    @{
                                                        var ProductFee = (item.Fee - ((item.Fee * item.Discount) / 100));
                                                        if (item.Discount > 0)
                                                        {
                                                            <div class="product-card-bottom">
                                                                <div class="product-price">
                                                                    <del>
                                                                        @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                    </del>
                                                                    @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                </div>
                                                                <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })" class="btn-add-to-cart">
                                                                   <i class='bx bx-cart-alt' ></i>
                                                                    مشاهده کالا
                                                                </a>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <div class="product-card-bottom">
                                                                <div class="product-price">
                                                                    @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                </div>
                                                                <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })" class="btn-add-to-cart">
                                                                   <i class='bx bx-cart-alt' ></i>
                                                                    مشاهده کالا
                                                                </a>
                                                            </div>
                                                        }

                                                    }
                                                </div>
                                            </div>
                                        }
                                    }
                                }
                                else
                                {
                                    var resultSelection = rep.RepositorySelectionProduct(head.Id);
                                    if (resultSelection.Count > 0)
                                    {
                                        foreach (var item in resultSelection)
                                        {
                                            <div class="swiper-slide">
                                                <div class="product-card default-ui">
                                                    <div class="product-card-top">
                                                        <a href="@Url.RouteUrl("Product", new {id = item.Id.ToString()})" class="product-image">
                                                            <img src="@item.FileName" alt="@item.PrimaryTitle">
                                                        </a>
                                                    </div>
                                                    <div class="product-card-middle">
                                                        <h6 class="product-name">
                                                            <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })">
                                                                @item.PrimaryTitle
                                                            </a>
                                                        </h6>
                                                        <h6 class="product-name">
                                                            موجودی: <span class="@item.QuantityClass">@item.QuantityTitle</span>
                                                        </h6>
                                                        @*@{
                                                                var ProductFee1 = (item.Fee - ((item.Fee * item.Discount) / 100));
                                                                if (item.Discount > 0)
                                                                {
                                                                    <div class="product-price product-price-clone">
                                                                        <del>@string.Format("{0:##,###}", ProductFee1, "Fee") تومان</del>
                                                                        @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                    </div>
                                                                }
                                                                else
                                                                {
                                                                    <div class="product-price product-price-clone">
                                                                        @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                    </div>
                                                                }
                                                            }*@
                                                    </div>

                                                    @{
                                                        var ProductFee = (item.Fee - ((item.Fee * item.Discount) / 100));
                                                        if (item.Discount > 0)
                                                        {
                                                            <div class="product-card-bottom">
                                                                <div class="product-price">
                                                                    <del>
                                                                        @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                    </del>
                                                                    @string.Format("{0:##,###}", ProductFee, "Fee") تومان
                                                                </div>
                                                                <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })" class="btn-add-to-cart">
                                                                   <i class='bx bx-cart-alt' ></i>
                                                                    مشاهده کالا
                                                                </a>
                                                            </div>
                                                        }
                                                        else
                                                        {
                                                            <div class="product-card-bottom">
                                                                <div class="product-price">
                                                                    @string.Format("{0:##,###}", item.Fee, "Fee") تومان
                                                                </div>
                                                                <a href="@Url.RouteUrl("Product", new { id = item.Id.ToString() })" class="btn-add-to-cart">
                                                                   <i class='bx bx-cart-alt' ></i>
                                                                    مشاهده کالا
                                                                </a>
                                                            </div>
                                                        }

                                                    }
                                                </div>
                                            </div>
                                        }
                                    }
                                }
                            }

                        </div>
                        <!-- Add Arrows -->
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                    </div>
                </section>
            }

        }
    }
}




